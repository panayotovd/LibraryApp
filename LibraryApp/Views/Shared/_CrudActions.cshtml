@model LibraryApp.Models.ViewModels.CrudActionsModel
@using LibraryApp.Helpers
@using Microsoft.AspNetCore.Routing

@{
    // 1) Вземаме текущите филтри/страница като RouteValueDictionary
    var baseState = RouteStateHelper.BuildFromRequest(Context.Request);

    // 2) Helper за строене на URL: копира state и добавя id
    string Link(string action)
    {
        var rvd = new RouteValueDictionary(baseState);
        rvd["id"] = Model.Id;
        // ако случайно има остатъчни ключове, които биха пречили:
        rvd.Remove("action");
        rvd.Remove("controller");
        return Url.Action(action, Model.Controller, rvd) ?? "#";
    }

    var detailsUrl = Link("Details");
    var editUrl = Link("Edit");
    var deleteUrl = Link("Delete");
}

<div class="btn-group btn-group-sm" role="group" aria-label="Действия">
    <a class="btn btn-outline-primary" href="@detailsUrl" title="@Model.DetailsText">
        <i class="bi bi-eye"></i>
        <span class="d-none d-md-inline"> @Model.DetailsText</span>
    </a>

    <a class="btn btn-outline-warning" href="@editUrl" title="@Model.EditText">
        <i class="bi bi-pencil-square"></i>
        <span class="d-none d-md-inline"> @Model.EditText</span>
    </a>

    <a class="btn btn-outline-danger" href="@deleteUrl" title="@Model.DeleteText">
        <i class="bi bi-trash"></i>
        <span class="d-none d-md-inline"> @Model.DeleteText</span>
    </a>
</div>
