@model LibraryApp.Models.Author
@{
    ViewData["Title"] = "Детайли";
    var books = ViewBag.Books as IEnumerable<LibraryApp.Models.Book> ?? Enumerable.Empty<LibraryApp.Models.Book>();
}
<h2 class="mb-3"><i class="bi bi-person-lines-fill me-2"></i>@Model.Name</h2>
<hr />

<div class="mb-4">
    <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary me-2"><i class="bi bi-pencil-square me-1"></i> Редакция</a>
    <a asp-action="Index" class="btn btn-outline-secondary"><i class="bi bi-arrow-left"></i> Назад</a>
</div>

<h4 class="mt-4 mb-2"><i class="bi bi-journal-bookmark me-2"></i>Книги на автора</h4>

@if (!books.Any())
{
    <div class="text-muted">Няма свързани книги.</div>
}
else
{
    <div class="table-responsive">
        <table class="table table-hover align-middle">
            <thead class="table-light">
                <tr>
                    <th>Заглавие</th>
                    <th style="width:1%" class="text-nowrap">Година</th>
                    <th style="width:1%"></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var b in books)
                {
                    <tr>
                        <td class="fw-medium">@b.Title</td>
                        <td>@b.Year</td>
                        <td class="text-nowrap">
                            <a asp-controller="Books" asp-action="Details" asp-route-id="@b.Id" class="btn btn-sm btn-outline-secondary">
                                <i class="bi bi-eye"></i>
                            </a>
                            @if (User.IsInRole("Admin") || User.IsInRole("Librarian"))
                            {
                                <a asp-controller="Books" asp-action="Edit" asp-route-id="@b.Id" class="btn btn-sm btn-outline-primary">
                                    <i class="bi bi-pencil"></i>
                                </a>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
